{
	"source": "https://docs.stripe.com/api",
	"crawledAt": "2026-02-02T05:18:45.905Z",
	"summary": {
		"pagesAttempted": 11,
		"pagesExtracted": 5,
		"pagesSkipped": 6,
		"totalTokensEstimate": 33113,
		"startTime": "2026-02-02T05:18:14.620Z",
		"endTime": "2026-02-02T05:18:45.874Z"
	},
	"pages": [
		{
			"url": "https://docs.stripe.com/api",
			"title": "Stripe API Reference",
			"markdown": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.\n\n### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.\n\n## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi).\n\n## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.\n\n#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`\n\n#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.\n\n## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n```\n\n## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```\n\n## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```\n\n## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```\n\n## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)\n\n### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```\n\n## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.\n\n#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.\n\n#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```\n\n## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.\n\n#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.\n\n#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n```\n\n## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```\n\n## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```\n\n## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
			"chunks": [
				{
					"id": "api_chunk_1",
					"content": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.",
					"tokensEstimate": 288,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_2",
					"content": "### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.",
					"tokensEstimate": 119,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_3",
					"content": "## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi).",
					"tokensEstimate": 358,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_4",
					"content": "## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.",
					"tokensEstimate": 148,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_5",
					"content": "#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`",
					"tokensEstimate": 268,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_6",
					"content": "#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.",
					"tokensEstimate": 442,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_7",
					"content": "## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n\n```",
					"tokensEstimate": 124,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_8",
					"content": "## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```",
					"tokensEstimate": 632,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_9",
					"content": "## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```",
					"tokensEstimate": 576,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_10",
					"content": "## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```",
					"tokensEstimate": 743,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_11",
					"content": "## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)",
					"tokensEstimate": 388,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_12",
					"content": "### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```",
					"tokensEstimate": 344,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_13",
					"content": "## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.",
					"tokensEstimate": 266,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_14",
					"content": "#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.",
					"tokensEstimate": 197,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_15",
					"content": "#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```",
					"tokensEstimate": 308,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_16",
					"content": "## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.",
					"tokensEstimate": 180,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_17",
					"content": "#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.",
					"tokensEstimate": 117,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_18",
					"content": "#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n\n```",
					"tokensEstimate": 503,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_19",
					"content": "## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```",
					"tokensEstimate": 155,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_20",
					"content": "## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```",
					"tokensEstimate": 200,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				},
				{
					"id": "api_chunk_21",
					"content": "## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
					"tokensEstimate": 262,
					"sourceUrl": "https://docs.stripe.com/api",
					"pageTitle": "Stripe API Reference"
				}
			],
			"metadata": {
				"url": "https://docs.stripe.com/api",
				"title": "Stripe API Reference",
				"depth": 0,
				"crawledAt": "2026-02-02T05:18:25.165Z",
				"tokensEstimate": 6616
			}
		},
		{
			"url": "https://docs.stripe.com/api/authentication",
			"title": "Authentication",
			"markdown": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fauthentication) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.\n\n### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.\n\n## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fauthentication).\n\n## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.\n\n#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`\n\n#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.\n\n## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n```\n\n## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```\n\n## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```\n\n## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```\n\n## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)\n\n### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```\n\n## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.\n\n#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.\n\n#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```\n\n## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.\n\n#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.\n\n#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n```\n\n## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```\n\n## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```\n\n## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
			"chunks": [
				{
					"id": "api_authentication_chunk_1",
					"content": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fauthentication) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.",
					"tokensEstimate": 292,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_2",
					"content": "### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.",
					"tokensEstimate": 119,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_3",
					"content": "## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fauthentication).",
					"tokensEstimate": 362,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_4",
					"content": "## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.",
					"tokensEstimate": 148,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_5",
					"content": "#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`",
					"tokensEstimate": 268,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_6",
					"content": "#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.",
					"tokensEstimate": 442,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_7",
					"content": "## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n\n```",
					"tokensEstimate": 124,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_8",
					"content": "## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```",
					"tokensEstimate": 632,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_9",
					"content": "## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```",
					"tokensEstimate": 576,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_10",
					"content": "## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```",
					"tokensEstimate": 743,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_11",
					"content": "## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)",
					"tokensEstimate": 388,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_12",
					"content": "### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```",
					"tokensEstimate": 344,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_13",
					"content": "## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.",
					"tokensEstimate": 266,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_14",
					"content": "#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.",
					"tokensEstimate": 197,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_15",
					"content": "#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```",
					"tokensEstimate": 308,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_16",
					"content": "## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.",
					"tokensEstimate": 180,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_17",
					"content": "#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.",
					"tokensEstimate": 117,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_18",
					"content": "#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n\n```",
					"tokensEstimate": 503,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_19",
					"content": "## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```",
					"tokensEstimate": 155,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_20",
					"content": "## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```",
					"tokensEstimate": 200,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				},
				{
					"id": "api_authentication_chunk_21",
					"content": "## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
					"tokensEstimate": 262,
					"sourceUrl": "https://docs.stripe.com/api/authentication",
					"pageTitle": "Authentication"
				}
			],
			"metadata": {
				"url": "https://docs.stripe.com/api/authentication",
				"title": "Authentication",
				"depth": 1,
				"crawledAt": "2026-02-02T05:18:31.544Z",
				"tokensEstimate": 6624
			}
		},
		{
			"url": "https://docs.stripe.com/api/errors",
			"title": "Errors",
			"markdown": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Ferrors) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.\n\n### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.\n\n## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Ferrors).\n\n## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.\n\n#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`\n\n#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.\n\n## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n```\n\n## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```\n\n## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```\n\n## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```\n\n## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)\n\n### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```\n\n## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.\n\n#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.\n\n#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```\n\n## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.\n\n#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.\n\n#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n```\n\n## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```\n\n## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```\n\n## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
			"chunks": [
				{
					"id": "api_errors_chunk_1",
					"content": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Ferrors) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.",
					"tokensEstimate": 290,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_2",
					"content": "### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.",
					"tokensEstimate": 119,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_3",
					"content": "## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Ferrors).",
					"tokensEstimate": 360,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_4",
					"content": "## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.",
					"tokensEstimate": 148,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_5",
					"content": "#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`",
					"tokensEstimate": 268,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_6",
					"content": "#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.",
					"tokensEstimate": 442,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_7",
					"content": "## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n\n```",
					"tokensEstimate": 124,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_8",
					"content": "## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```",
					"tokensEstimate": 632,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_9",
					"content": "## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```",
					"tokensEstimate": 576,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_10",
					"content": "## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```",
					"tokensEstimate": 743,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_11",
					"content": "## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)",
					"tokensEstimate": 388,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_12",
					"content": "### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```",
					"tokensEstimate": 344,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_13",
					"content": "## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.",
					"tokensEstimate": 266,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_14",
					"content": "#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.",
					"tokensEstimate": 197,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_15",
					"content": "#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```",
					"tokensEstimate": 308,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_16",
					"content": "## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.",
					"tokensEstimate": 180,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_17",
					"content": "#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.",
					"tokensEstimate": 117,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_18",
					"content": "#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n\n```",
					"tokensEstimate": 503,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_19",
					"content": "## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```",
					"tokensEstimate": 155,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_20",
					"content": "## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```",
					"tokensEstimate": 200,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				},
				{
					"id": "api_errors_chunk_21",
					"content": "## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
					"tokensEstimate": 262,
					"sourceUrl": "https://docs.stripe.com/api/errors",
					"pageTitle": "Errors"
				}
			],
			"metadata": {
				"url": "https://docs.stripe.com/api/errors",
				"title": "Errors",
				"depth": 1,
				"crawledAt": "2026-02-02T05:18:33.199Z",
				"tokensEstimate": 6620
			}
		},
		{
			"url": "https://docs.stripe.com/api/expanding_objects",
			"title": "Expanding Responses",
			"markdown": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fexpanding_objects) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.\n\n### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.\n\n## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fexpanding_objects).\n\n## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.\n\n#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`\n\n#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.\n\n## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n```\n\n## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```\n\n## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```\n\n## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```\n\n## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)\n\n### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```\n\n## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.\n\n#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.\n\n#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```\n\n## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.\n\n#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.\n\n#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n```\n\n## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```\n\n## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```\n\n## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
			"chunks": [
				{
					"id": "api_expanding_objects_chunk_1",
					"content": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fexpanding_objects) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.",
					"tokensEstimate": 293,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_2",
					"content": "### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.",
					"tokensEstimate": 119,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_3",
					"content": "## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fexpanding_objects).",
					"tokensEstimate": 363,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_4",
					"content": "## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.",
					"tokensEstimate": 148,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_5",
					"content": "#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`",
					"tokensEstimate": 268,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_6",
					"content": "#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.",
					"tokensEstimate": 442,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_7",
					"content": "## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n\n```",
					"tokensEstimate": 124,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_8",
					"content": "## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```",
					"tokensEstimate": 632,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_9",
					"content": "## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```",
					"tokensEstimate": 576,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_10",
					"content": "## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```",
					"tokensEstimate": 743,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_11",
					"content": "## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)",
					"tokensEstimate": 388,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_12",
					"content": "### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```",
					"tokensEstimate": 344,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_13",
					"content": "## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.",
					"tokensEstimate": 266,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_14",
					"content": "#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.",
					"tokensEstimate": 197,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_15",
					"content": "#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```",
					"tokensEstimate": 308,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_16",
					"content": "## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.",
					"tokensEstimate": 180,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_17",
					"content": "#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.",
					"tokensEstimate": 117,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_18",
					"content": "#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n\n```",
					"tokensEstimate": 503,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_19",
					"content": "## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```",
					"tokensEstimate": 155,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_20",
					"content": "## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```",
					"tokensEstimate": 200,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				},
				{
					"id": "api_expanding_objects_chunk_21",
					"content": "## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
					"tokensEstimate": 262,
					"sourceUrl": "https://docs.stripe.com/api/expanding_objects",
					"pageTitle": "Expanding Responses"
				}
			],
			"metadata": {
				"url": "https://docs.stripe.com/api/expanding_objects",
				"title": "Expanding Responses",
				"depth": 1,
				"crawledAt": "2026-02-02T05:18:34.808Z",
				"tokensEstimate": 6626
			}
		},
		{
			"url": "https://docs.stripe.com/api/idempotent_requests",
			"title": "Idempotent requests",
			"markdown": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fidempotent_requests) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.\n\n### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.\n\n## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fidempotent_requests).\n\n## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.\n\n#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`\n\n#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.\n\n## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n```\n\n## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```\n\n## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```\n\n## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```\n\n## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)\n\n### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```\n\n## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.\n\n#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.\n\n#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```\n\n## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.\n\n#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.\n\n#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n```\n\n## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```\n\n## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```\n\n## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
			"chunks": [
				{
					"id": "api_idempotent_requests_chunk_1",
					"content": "## [API Reference](/api)\n\nThe Stripe API is organized around [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer). Our API has predictable resource-oriented URLs, accepts [form-encoded](https://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms) request bodies, returns [JSON-encoded](http://www.json.org/) responses, and uses standard HTTP response codes, authentication, and verbs.\n\nYou can use the Stripe API in test mode, which doesn’t affect your live data or interact with the banking networks. The API key you use to [authenticate](/api/authentication) the request determines whether the request is live mode or test mode. Test mode supports some [v2 APIs](/api-v2-overview#limitations).\n\nThe Stripe API doesn’t support bulk updates. You can work on only one object per request.\n\nThe Stripe API differs for every account as we release new [versions](/api/versioning) and tailor functionality. [Log in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fidempotent_requests) to see docs with your test key and data.\n\n### Just getting started?\n\nCheck out our [development quickstart](/development/quickstart) guide.",
					"tokensEstimate": 294,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_2",
					"content": "### Not a developer?\n\nUse Stripe’s [no-code options](/payments/no-code) or apps from [our partners](https://stripe.partners/) to get started with Stripe and to do more with your Stripe account—no code required.\n\nBase URL\n\n```text\nhttps://api.stripe.com\n```\n\nClient Libraries\n\nRubyPythonPHPJavaNode.jsGo.NET\n\nBy default, the Stripe API Docs demonstrate using curl to interact with the API over HTTP. Select one of our official [client libraries](/libraries) to see examples in code.",
					"tokensEstimate": 119,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_3",
					"content": "## [Authentication](/api/authentication)\n\nThe Stripe API uses [API keys](/keys) to authenticate requests. You can view and manage your API keys in [the Stripe Dashboard](https://dashboard.stripe.com/login?redirect=/apikeys).\n\nTest mode secret keys have the prefix `sk_test_` and live mode secret keys have the prefix `sk_live_`. Alternatively, you can use [restricted API keys](/keys#limit-access) for granular permissions.\n\nYour API keys carry many privileges, so be sure to keep them secure! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.\n\nAll API requests must be made over [HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure). Calls made over plain HTTP will fail. API requests without authentication will also fail.\n\nAuthenticated Request\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:# The colon prevents curl from asking for a password.\n```\n\nYour API Key\n\nA sample test API key is included in all the examples here, so you can test any example right away. Do not submit any personally identifiable information in requests made with this key.\n\nTo test requests using your account, replace the sample API key with your actual API key or [sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fapi%2Fidempotent_requests).",
					"tokensEstimate": 363,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_4",
					"content": "## [Errors](/api/errors)\n\nStripe uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the `5xx` range indicate an error with Stripe’s servers (these are rare).\n\nSome `4xx` errors that could be handled programmatically (e.g., a card is [declined](/declines)) include an [error code](/error-codes) that briefly explains the error reported.",
					"tokensEstimate": 148,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_5",
					"content": "#### Attributes\n\n- ####\n\ncodenullable string For some errors that could be handled programmatically, a short string indicating the [error code](/error-codes) reported.- ####\n\ndecline\\_codenullable string For card errors resulting from a card issuer decline, a short string indicating the [card issuer’s reason for the decline](/declines#issuer-declines) if they provide one.- ####\n\nmessagenullable string A human-readable message providing more details about the error. For card errors, these messages can be shown to your users.- ####\n\nparamnullable string If the error is parameter-specific, the parameter related to the error. For example, you can use this to display a message near the correct form field.- ####\n\npayment\\_intentnullable object The [PaymentIntent object](/api/payment_intents/object) for errors returned on a request involving a PaymentIntent.- ####\n\ntypeenum The type of error returned. One of `api_error`, `card_error`, `idempotency_error`, or `invalid_request_error`\n\nPossible enum values\n\n`api_error`\n\n`card_error`\n\n`idempotency_error`\n\n`invalid_request_error`",
					"tokensEstimate": 268,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_6",
					"content": "#### More\n\n- ####\n\nadvice\\_codenullable string- ####\n\nchargenullable string- ####\n\ndoc\\_urlnullable string- ####\n\nnetwork\\_advice\\_codenullable string- ####\n\nnetwork\\_decline\\_codenullable string- ####\n\npayment\\_methodnullable object- ####\n\npayment\\_method\\_typenullable string- ####\n\nrequest\\_log\\_urlnullable string- ####\n\nsetup\\_intentnullable object- ####\n\nsourcenullable object\n\nHTTP Status Code Summary\n\n200\n\nOK\n\nEverything worked as expected.\n\n400\n\nBad Request\n\nThe request was unacceptable, often due to missing a required parameter.\n\n401\n\nUnauthorized\n\nNo valid API key provided.\n\n402\n\nRequest Failed\n\nThe parameters were valid but the request failed.\n\n403\n\nForbidden\n\nThe API key doesn’t have permissions to perform the request.\n\n404\n\nNot Found\n\nThe requested resource doesn’t exist.\n\n409\n\nConflict\n\nThe request conflicts with another request (perhaps due to using the same idempotent key).\n\n424\n\nExternal Dependency Failed\n\nThe request couldn’t be completed due to a failure in a dependency external to Stripe.\n\n429\n\nToo Many Requests\n\nToo many requests hit the API too quickly. We recommend an exponential backoff of your requests.\n\n500, 502, 503, 504\n\nServer Errors\n\nSomething went wrong on Stripe’s end. (These are rare.)\n\nError Types\n\n`api_error`\n\nAPI errors cover any other type of problem (e.g., a temporary problem with Stripe’s servers), and are extremely uncommon.\n\n`card_error`\n\nCard errors are the most common type of error you should expect to handle. They result when the user enters a card that can’t be charged for some reason.\n\n`idempotency_error`\n\nIdempotency errors occur when an `Idempotency-Key` is re-used on a request that does not match the first request’s API endpoint and parameters.\n\n`invalid_request_error`\n\nInvalid request errors arise when your request has invalid parameters.",
					"tokensEstimate": 442,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_7",
					"content": "## [Handling errors](/api/errors/handling)\n\nOur Client libraries raise exceptions for many reasons, such as a failed charge, invalid parameters, authentication errors, and network unavailability. We recommend writing code that gracefully handles all possible API exceptions.\n\n- Related guide: [Error Handling](/error-handling)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## Select a client library to see examples of# handling different kinds of errors.\n\n```",
					"tokensEstimate": 124,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_8",
					"content": "## [Expanding Responses](/api/expanding_objects)\n\nMany objects allow you to request additional information as an expanded response by using the `expand` request parameter. This parameter is available on all API requests, and applies to the response of that request only. You can expand responses in two ways.\n\nIn many cases, an object contains the ID of a related object in its response properties. For example, a `Charge` might have an associated Customer ID. You can expand these objects in line with the expand request parameter. The `expandable` label in this documentation indicates ID fields that you can expand into objects.\n\nSome available fields aren’t included in the responses by default, such as the `number` and `cvc` fields for the Issuing Card object. You can request these fields as an expanded response by using the `expand` request parameter.\n\nYou can expand recursively by specifying nested fields after a dot (`.`). For example, requesting `payment_intent.customer` on a charge expands the `payment_intent` property into a full PaymentIntent object, then expands the `customer` property on that payment intent into a full Customer object.\n\nYou can use the `expand` parameter on any endpoint that returns expandable fields, including list, create, and update endpoints.\n\nExpansions on list requests start with the `data` property. For example, you can expand `data.customers` on a request to list charges and associated customers. Performing deep expansions on numerous list requests might result in slower processing times.\n\nExpansions have a maximum depth of four levels (for example, the deepest expansion allowed when listing charges is `data.payment_intent.customer.default_source`).\n\nYou can expand multiple objects at the same time by identifying multiple items in the `expand` array.\n\n- Related guide: [Expanding responses](/expand)- Related video: [Expand](https://www.youtube.com/watch?v=m8Vj_CEWyQc)\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmzzQ2eZvKYlo2C0XjzUzJV \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -d \"expand[]\"=customer \\ -d \"expand[]\"=\"payment_intent.customer\" \\ -G\n```\n\nResponse\n\n```json\n{\"id\":\"ch_3LmzzQ2eZvKYlo2C0XjzUzJV\",\"object\":\"charge\",\"customer\":{\"id\":\"cu_14HOpH2eZvKYlo2CxXIM7Pb2\",\"object\":\"customer\",// ...},\"payment_intent\":{\"id\":\"pi_3MtwBwLkdIwHu7ix28a3tqPa\",\"object\":\"payment_intent\",\"customer\":{\"id\":\"cus_NffrFeUfNV2Hib\",\"object\":\"customer\",// ...},// ...},// ...}\n```",
					"tokensEstimate": 632,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_9",
					"content": "## [Idempotent requests](/api/idempotent_requests)\n\nThe API supports [idempotency](https://en.wikipedia.org/wiki/Idempotence) for safely retrying requests without accidentally performing the same operation twice. When creating or updating an object, use an idempotency key. Then, if a connection error occurs, you can safely repeat the request without risk of creating a second object or performing the update twice.\n\nTo perform an idempotent request, provide an additional `IdempotencyKey` element to the request options.\n\nStripe’s idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeds or fails. Subsequent requests with the same key return the same result, including `500` errors.\n\nA client generates an idempotency key, which is a unique key that the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Idempotency keys are up to 255 characters long.\n\nYou can remove keys from the system automatically after they’re at least 24 hours old. We generate a new request if a key is reused after the original is pruned. The idempotency layer compares incoming parameters to those of the original request and errors if they’re not the same to prevent accidental misuse.\n\nWe save results only after the execution of an endpoint begins. If incoming parameters fail validation, or the request conflicts with another request that’s executing concurrently, we don’t save the idempotent result because no API endpoint initiates the execution. You can retry these requests. Learn more about when you can [retry idempotent requests](/error-low-level#idempotency).\n\nAll `POST` requests accept idempotency keys. Don’t send idempotency keys in `GET` and `DELETE` requests because it has no effect. These requests are idempotent by definition.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Idempotency-Key: KG5LxwFBepaKHyUD\" \\ -d description=\"My First Test Customer (created for API docs at https://docs.stripe.com/api)\"\n```",
					"tokensEstimate": 576,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_10",
					"content": "## [Include-dependent response values (API v2)](/api/include_dependent_response_values)\n\nSome API v2 responses contain null values for certain properties by default, regardless of their actual values. That reduces the size of response payloads while maintaining the basic response structure. To retrieve the actual values for those properties, specify them in the `include` array request parameter.\n\nTo determine whether you need to use the `include` parameter in a given request, look at the request description. The `include` parameter’s enum values represent the response properties that depend on the `include` parameter.\n\nNote\n\nWhether a response property defaults to null depends on the request endpoint, not the object that the endpoint references. If multiple endpoints return data from the same object, a particular property can depend on `include` in one endpoint and return its actual value by default for a different endpoint.\n\nA hash property can depend on a single `include` value, or on multiple `include` values associated with its child properties. For example, when updating an Account, to return actual values for the entire `identity` hash, specify `identity` in the `include` parameter. Otherwise, the `identity` hash is null in the response. However, to return actual values for the `configuration` hash, you must specify individual configurations in the request. If you specify at least one configuration, but not all of them, specified configurations return actual values and unspecified configurations return null. If you don’t specify any configurations, the `configuration` hash is null in the response.\n\n- Related guide: [Include-dependent response values](/api-includable-response-values)\n\nPOST /v2/core/accounts\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl -X POST https://api.stripe.com/v2/core/accounts \\ -H \"Authorization: Bearer sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ\" \\ -H \"Stripe-Version: 2026-01-28.preview\" \\ --json '{ \"include\": [ \"identity\", \"configuration.customer\" ] }'\n```\n\nIncluded response properties\n\nThe response includes actual values for the properties specified in the `include` parameter, and null for all other include-dependent properties.\n\nResponse\n\n```json\n{\"id\":\"acct_123\",\"object\":\"v2.core.account\",\"applied_configurations\":[\"customer\",\"merchant\"],\"configuration\":{\"customer\":{\"automatic_indirect_tax\":{ ...},\"billing\":{ ...},\"capabilities\":{ ...}, ...},\"merchant\":null,\"recipient\":null},\"contact_email\":\"furever@example.com\",\"created\":\"2025-06-09T21:16:03.000Z\",\"dashboard\":\"full\",\"defaults\":null,\"display_name\":\"Furever\",\"identity\":{\"business_details\":{\"doing_business_as\":\"FurEver\",\"id_numbers\":[{\"type\":\"us_ein\"}],\"product_description\":\"Saas pet grooming platform at furever.dev using Connect embedded components\",\"structure\":\"sole_proprietorship\",\"url\":\"http://accessible.stripe.com\"},\"country\":\"US\"},\"livemode\":true,\"metadata\":{},\"requirements\":null}\n```",
					"tokensEstimate": 743,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_11",
					"content": "## [Metadata](/api/metadata)\n\nUpdateable Stripe objects—including [Account](/api/accounts), [Charge](/api/charges), [Customer](/api/customers), [PaymentIntent](/api/payment_intents), [Refund](/api/refunds), [Subscription](/api/subscriptions), and [Transfer](/api/transfers) have a `metadata` parameter. You can use this parameter to attach key-value data to these Stripe objects.\n\nYou can specify up to 50 keys, with key names up to 40 characters long and values up to 500 characters long. Keys and values are stored as strings and can contain any characters with one exception: you can’t use square brackets (\\[ and \\]) in keys.\n\nYou can use metadata to store additional, structured information on an object. For example, you could store your user’s full name and corresponding unique identifier from your system on a Stripe [Customer](/api/customers) object. Stripe doesn’t use metadata—for example, we don’t use it to authorize or decline a charge and it won’t be seen by your users unless you choose to show it to them.\n\nSome of the objects listed above also support a `description` parameter. You can use the `description` parameter to annotate a charge-for example, a human-readable description such as `2 shirts for test@example.com`. Unlike `metadata`, `description` is a single string, which your users might see (for example, in email receipts Stripe sends on your behalf).\n\nDon’t store any sensitive information (bank account numbers, card details, and so on) as metadata or in the `description` parameter.\n\n- Related guide: [Metadata](/metadata)",
					"tokensEstimate": 388,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_12",
					"content": "### Sample metadata use cases\n\n- **Link IDs**: Attach your system’s unique IDs to a Stripe object to simplify lookups. For example, add your order number to a charge, your user ID to a customer or recipient, or a unique receipt number to a transfer.- **Refund papertrails**: Store information about the reason for a refund and the individual responsible for its creation.- **Customer details**: Annotate a customer by storing an internal ID for your future use.\n\nPOST /v1/customers\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u \"sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ:\" \\ -d \"metadata[order_id]\"=6735\n```\n\n```json\n{\n  \"id\": \"cus_123456789\",\n  \"object\": \"customer\",\n  \"address\": {\n    \"city\": \"city\",\n    \"country\": \"US\",\n    \"line1\": \"line 1\",\n    \"line2\": \"line 2\",\n    \"postal_code\": \"90210\",\n    \"state\": \"CA\"\n  },\n  \"balance\": 0,\n  \"created\": 1483565364,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": null,\n  \"invoice_prefix\": \"C11F7E1\",\n  \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\": null,\n    \"footer\": null,\n    \"rendering_options\": null\n  },\n  \"livemode\": false,\n  \"metadata\": {\n    \"order_id\": \"6735\"\n  },\n  \"name\": null,\n  \"next_invoice_sequence\": 1,\n  \"phone\": null,\n  \"preferred_locales\": [],\n  \"shipping\": null,\n  \"tax_exempt\": \"none\"\n}\n```",
					"tokensEstimate": 344,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_13",
					"content": "## [Pagination](/api/pagination)\n\nAll top-level API resources have support for bulk fetches through “list” API methods. For example, you can [list charges](/api/charges/list), [list customers](/api/customers/list), and [list invoices](/api/invoices/list). These list API methods share a common structure and accept, at a minimum, the following three parameters: `limit`, `starting_after`, and `ending_before`.\n\nStripe’s list API methods use cursor-based [pagination](/pagination) through the `starting_after` and `ending_before` parameters. Both parameters accept an existing object ID value (see below) and return objects in reverse chronological order. The `ending_before` parameter returns objects listed before the named object. The `starting_after` parameter returns objects listed after the named object. These parameters are mutually exclusive. You can use either the `starting_after` or `ending_before` parameter, but not both simultaneously.\n\nOur client libraries offer [auto-pagination helpers](/pagination#auto-pagination) to traverse all pages of a list.",
					"tokensEstimate": 266,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_14",
					"content": "#### Parameters\n\n- ####\n\nlimitoptional, default is 10 This specifies a limit on the number of objects to return, ranging between 1 and 100.- ####\n\nstarting\\_afteroptional object ID A cursor to use in pagination. `starting_after` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, ending with `obj_foo`, your subsequent call can include `starting_after=obj_foo` to fetch the next page of the list.- ####\n\nending\\_beforeoptional object ID A cursor to use in pagination. `ending_before` is an object ID that defines your place in the list. For example, if you make a list request and receive 100 objects, starting with `obj_bar`, your subsequent call can include `ending_before=obj_bar` to fetch the previous page of the list.",
					"tokensEstimate": 197,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_15",
					"content": "#### List Response Format\n\n- ####\n\nobjectstring, value is \"list\" A string that provides a description of the object type that returns.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\nurlurl The URL for accessing this list.\n\nv2 API pagination\n\nAPIs within the `/v2` namespace contain a different [pagination](/api-v2-overview#list-pagination) interface than the `v1` namespace.\n\nResponse\n\n```json\n{\"object\":\"list\",\"url\":\"/v1/customers\",\"has_more\":false,\"data\":[{\"id\":\"cus_4QFJOjw2pOmAGJ\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1405641735,\"currency\":\"usd\",\"default_source\":\"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\"delinquent\":false,\"description\":\"New customer\",\"discount\":null,\"email\":null,\"invoice_prefix\":\"7D11B54\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null,\"rendering_options\":null},\"livemode\":false,\"metadata\":{\"order_id\":\"6735\"},\"name\":\"cus_4QFJOjw2pOmAGJ\",\"next_invoice_sequence\":25,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"tax_exempt\":\"none\",\"test_clock\":null},]}\n```",
					"tokensEstimate": 308,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_16",
					"content": "## [Search](/api/pagination/search)\n\nSome top-level API resource have support for retrieval via “search” API methods. For example, you can [search charges](/api/charges/search), [search customers](/api/customers/search), and [search subscriptions](/api/subscriptions/search).\n\nStripe’s search API methods utilize cursor-based pagination via the `page` request parameter and `next_page` response parameter. For example, if you make a search request and receive `\"next_page\": \"pagination_key\"` in the response, your subsequent call can include `page=pagination_key` to fetch the next page of results.\n\nOur client libraries offer [auto-pagination](/api/pagination/auto) helpers to easily traverse all pages of a search result.",
					"tokensEstimate": 180,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_17",
					"content": "#### Search request format\n\n- ####\n\nqueryrequired The search query string. See [search query language](/search#search-query-language).- ####\n\nlimitoptional A limit on the number of objects returned. Limit can range between 1 and 100, and the default is 10.- ####\n\npageoptional A cursor for pagination across multiple pages of results. Don’t include this parameter on the first call. Use the `next_page` value returned in a previous response to request subsequent results.",
					"tokensEstimate": 117,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_18",
					"content": "#### Search response format\n\n- ####\n\nobjectstring, value is \"search\\_result\" A string describing the object type returned.- ####\n\nurlstring The URL for accessing this list.- ####\n\nhas\\_moreboolean Whether or not there are more elements available after this set. If `false`, this set comprises the end of the list.- ####\n\ndataarray An array containing the actual response elements, paginated by any request parameters.- ####\n\nnext\\_pagestring A cursor for use in pagination. If `has_more` is true, you can pass the value of `next_page` to a subsequent call to fetch the next page of results.- ####\n\ntotal\\_countoptional positive integer or zero The total number of objects that match the query, only accurate up to 10,000. This field isn’t included by default. To include it in the response, [expand](/api/expanding_objects) the `total_count` field.\n\nResponse\n\n```json\n{\n  \"object\": \"search_result\",\n  \"url\": \"/v1/customers/search\",\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"cus_4QFJOjw2pOmAGJ\",\n      \"object\": \"customer\",\n      \"address\": null,\n      \"balance\": 0,\n      \"created\": 1405641735,\n      \"currency\": \"usd\",\n      \"default_source\": \"card_14HOpG2eZvKYlo2Cz4u5AJG5\",\n      \"delinquent\": false,\n      \"description\": \"someone@example.com for Coderwall\",\n      \"discount\": null,\n      \"email\": null,\n      \"invoice_prefix\": \"7D11B54\",\n      \"invoice_settings\": {\n        \"custom_fields\": null,\n        \"default_payment_method\": null,\n        \"footer\": null,\n        \"rendering_options\": null\n      },\n      \"livemode\": false,\n      \"metadata\": {\n        \"foo\": \"bar\"\n      },\n      \"name\": \"fakename\",\n      \"next_invoice_sequence\": 25,\n      \"phone\": null,\n      \"preferred_locales\": [],\n      \"shipping\": null,\n      \"tax_exempt\": \"none\",\n      \"test_clock\": null\n    }\n  ]\n}\n```\n\n## [Auto-pagination](/api/pagination/auto)\n\nOur libraries support auto-pagination. This feature allows you to easily iterate through large lists of resources without having to manually perform the requests to fetch subsequent pages.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\n\n## The auto-pagination feature is specific to Stripe's# libraries and cannot be used directly with curl.\n\n```",
					"tokensEstimate": 503,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_19",
					"content": "## [Request IDs](/api/request_ids)\n\nEach API request has an associated request identifier. You can find this value in the response headers, under `Request-Id`. You can also find request identifiers in the URLs of individual request logs in your [Dashboard](https://dashboard.stripe.com/logs).\n\nTo expedite the resolution process, provide the request identifier when you contact us about a specific request.\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/customers \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -D \"-\" \\ -X POST\n```",
					"tokensEstimate": 155,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_20",
					"content": "## [Connected Accounts](/api/connected-accounts)\n\nIf you use Stripe [Connect](/connect), you can issue requests on behalf of your [connected accounts](/connect/accounts). To act as a connected account, include a `Stripe-Account` header containing the connected account ID, which typically starts with the `acct_` prefix.\n\nThe connected account ID is set per-request. Methods on the returned object reuse the same account ID.\n\n- Related guide: [Making API calls for connected accounts](/connect/authentication)\n\nPer-Request Account\n\nServer-side language\n\ncURL\n\nStripe CLI\n\nRuby\n\nPython\n\nPHP\n\nJava\n\nNode.js\n\nGo\n\n.NET\n\n```bash\ncurl https://api.stripe.com/v1/charges/ch_3LmjFA2eZvKYlo2C09TLIsrw \\ -u sk_test_VePHdqK...NInc7u56JBrQsk_test_VePHdqKTYQjKNInc7u56JBrQ: \\ -H \"Stripe-Account: acct_1032D82eZvKYlo2C\" \\ -G\n```",
					"tokensEstimate": 200,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				},
				{
					"id": "api_idempotent_requests_chunk_21",
					"content": "## [Versioning](/api/versioning)\n\nEach major release, such as [Acacia](/changelog/acacia), includes changes that aren’t [backward-compatible](/upgrades#what-changes-does-stripe-consider-to-be-backward-compatible) with previous releases. Upgrading to a new major release can require updates to existing code. Each monthly release includes only backward-compatible changes, and uses the same name as the last major release. You can safely upgrade to a new monthly release without breaking any existing code. The current version is 2026-01-28.clover. For information on all API versions, view our [API changelog](/changelog).\n\nYou can upgrade your API version in [Workbench](https://dashboard.stripe.com/workbench). As a precaution, use API versioning to test a new API version before committing to an upgrade.\n\n- Need help? [Contact Support](https://support.stripe.com/).- Check out our [changelog](/changelog).- Questions? [Contact Sales](https://stripe.com/contact/sales).- LLM? [Read llms.txt](/llms.txt).- Powered by [Markdoc](https://markdoc.dev)",
					"tokensEstimate": 262,
					"sourceUrl": "https://docs.stripe.com/api/idempotent_requests",
					"pageTitle": "Idempotent requests"
				}
			],
			"metadata": {
				"url": "https://docs.stripe.com/api/idempotent_requests",
				"title": "Idempotent requests",
				"depth": 1,
				"crawledAt": "2026-02-02T05:18:39.964Z",
				"tokensEstimate": 6627
			}
		}
	]
}